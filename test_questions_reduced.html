<!DOCTYPE html>
<html>
<head>
    <title>Test Reduced Questions</title>
    <script src="questions.js"></script>
</head>
<body>
    <h1>Testing Reduced Questions Catalog</h1>
    <div id="results"></div>
    <script>
        const results = document.getElementById('results');
        
        // Test 1: Verify QUESTIONS_CATALOG exists
        if (typeof QUESTIONS_CATALOG === 'undefined') {
            results.innerHTML += '<p style="color:red">❌ QUESTIONS_CATALOG not defined</p>';
        } else {
            results.innerHTML += '<p style="color:green">✓ QUESTIONS_CATALOG is defined</p>';
        }
        
        // Test 2: Verify themes
        const expectedThemes = [
            "Gouvernance & Organisation",
            "Méthodes & Standardisation",
            "Automatisation & CI/CD",
            "Données de Test & Conformité",
            "Environnements de test",
            "Culture & Collaboration"
        ];
        
        if (QUESTIONS_CATALOG.themes.length === 6) {
            results.innerHTML += '<p style="color:green">✓ 6 themes present</p>';
        } else {
            results.innerHTML += '<p style="color:red">❌ Expected 6 themes, got ' + QUESTIONS_CATALOG.themes.length + '</p>';
        }
        
        // Test 3: Verify question count
        if (QUESTIONS_CATALOG.questions.length === 30) {
            results.innerHTML += '<p style="color:green">✓ 30 questions total</p>';
        } else {
            results.innerHTML += '<p style="color:red">❌ Expected 30 questions, got ' + QUESTIONS_CATALOG.questions.length + '</p>';
        }
        
        // Test 4: Verify 5 questions per theme
        const themeCounts = {};
        QUESTIONS_CATALOG.questions.forEach(q => {
            themeCounts[q.theme] = (themeCounts[q.theme] || 0) + 1;
        });
        
        let allThemesHave5 = true;
        expectedThemes.forEach(theme => {
            const count = themeCounts[theme] || 0;
            if (count !== 5) {
                results.innerHTML += '<p style="color:red">❌ Theme "' + theme + '" has ' + count + ' questions, expected 5</p>';
                allThemesHave5 = false;
            }
        });
        
        if (allThemesHave5) {
            results.innerHTML += '<p style="color:green">✓ All themes have exactly 5 questions</p>';
        }
        
        // Test 5: Verify ID naming pattern
        const idPattern = /^(GO|MS|AC|DT|ET|CC)-\d+(-[A-Z]+)?$/;
        let allIdsValid = true;
        QUESTIONS_CATALOG.questions.forEach(q => {
            if (!idPattern.test(q.id)) {
                results.innerHTML += '<p style="color:orange">⚠ ID "' + q.id + '" does not match expected pattern</p>';
                allIdsValid = false;
            }
        });
        
        if (allIdsValid) {
            results.innerHTML += '<p style="color:green">✓ All question IDs follow the naming pattern</p>';
        }
        
        // Test 6: Verify question structure
        let allQuestionsValid = true;
        QUESTIONS_CATALOG.questions.forEach((q, idx) => {
            if (!q.id || !q.theme || !q.profiles || !q.question || !q.category || typeof q.weight !== 'number') {
                results.innerHTML += '<p style="color:red">❌ Question at index ' + idx + ' has invalid structure</p>';
                allQuestionsValid = false;
            }
        });
        
        if (allQuestionsValid) {
            results.innerHTML += '<p style="color:green">✓ All questions have valid structure (id, theme, profiles, question, category, weight)</p>';
        }
        
        // Summary
        results.innerHTML += '<hr><h2>Summary</h2>';
        results.innerHTML += '<p><strong>Total Questions:</strong> ' + QUESTIONS_CATALOG.questions.length + '</p>';
        results.innerHTML += '<p><strong>Questions per theme:</strong></p><ul>';
        expectedThemes.forEach(theme => {
            results.innerHTML += '<li>' + theme + ': ' + (themeCounts[theme] || 0) + ' questions</li>';
        });
        results.innerHTML += '</ul>';
        
        console.log('✓ All tests passed successfully');
    </script>
</body>
</html>
